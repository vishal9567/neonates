<div class="container mb-5" style="margin-top: 160px;">
    <div class="row d-flex justify-content-center">
        <div class="col-md-10">
            <div class="card">
                <div class="row">
                    <div class="col-md-6">
                        <div class="images p-3">
                            <div class="text-center p-4"> <img id="main-image" src="/images/{{product.image.[0]}}"
                                    width="250" /> </div>
                            <div class="thumbnail text-center"> <img onclick="change_image(this)"
                                    src="/images/{{product.image.[0]}}" width="70"> <img onclick="change_image(this)"
                                    src="/images/{{product.image.[1]}}" width="70"> </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="product p-4">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="d-flex align-items-center"> <i class="fa fa-long-arrow-left"></i> <a
                                        href="/landing" class="text-decoration-none"><span class="ml-1">Back</span></a>
                                </div> <i class="fa fa-shopping-cart text-muted"></i>
                            </div>
                            <div class="mt-4 mb-3"> <span
                                    class="text-uppercase text-muted brand">{{product.brandname}}</span>
                                <h5 class="text-uppercase">{{product.productname}}</h5>
                                <div class="price d-flex flex-row align-items-center"> <span class="act-price"></span>
                                    <div class="ml-2"> <small class="dis-price"></small> <span></span> </div>
                                </div>
                            </div>
                            <p class="about">{{product.discription}}</p>

                            <div class="cart mt-4 align-items-center">
                                <button class="btn btn-danger text-uppercase mr-2 px-4"
                                    onclick="addtocart('{{product._id}}','{{user}}')">Add to
                                    cart</button> <i class="fa fa-heart text-muted">

                                </i> <i class="fa fa-share-alt text-muted"></i>
                                <button class="btn btn-warning text-uppercase mr-2 px-4"
                                    onclick="addtowhishlist('{{product._id}}','{{product.productname}}','{{product.brandname}}','{{product.image.[0]}}',{{product.price}},'{{user}}')">Add
                                    to
                                    whishlist</button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="carouselExampleSlidesOnly" class="carousel slide" data-mdb-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item active" style="height:400px">
            <img src="https://mdbcdn.b-cdn.net/img/new/slides/041.webp" class="d-block w-100" alt="Wild Landscape" />
        </div>
        <div class="carousel-item" style="height:400px">
            <img src="https://mdbcdn.b-cdn.net/img/new/slides/042.webp" class="d-block w-100" alt="Camera" />
        </div>
        <div class="carousel-item" style="height:400px">
            <img src="https://mdbcdn.b-cdn.net/img/new/slides/043.webp" class="d-block w-100" alt="Exotic Fruits" />
        </div>
    </div>
</div>

<script>
    function change_image(image) {

        var container = document.getElementById("main-image");

        container.src = image.src;
    }



    document.addEventListener("DOMContentLoaded", function (event) {

    });
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.5/dist/sweetalert2.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.5/dist/sweetalert2.min.js"></script>

<script>
    function addtocart(id, user) {
        $.ajax({
            url: '/addToCart/' + id,
            method: 'get',
            success: (function (response) {
                if (user) {
                    if (response.cartAdded) {
                        Swal.fire({
                            title: 'Added to cart!',
                            text: 'Product has been added to cart succesfully.',
                            icon: 'success',
                            timer: 5000
                        })
                    }
                    else if (response.productEmpty) {
                        Swal.fire({
                            title: 'Product not available',
                            text: 'Sorry for the trouble',
                            icon: 'info',
                            timer: 5000
                        })
                    }
                }
                else {
                    Swal.fire({
                        title: 'Please login',
                        text: 'Signup or login',
                        icon: 'info',
                        timer: 5000
                    }).then(function () {
                        window.location.href = "http://localhost:3000/userLogin"
                    })
                }

            })
        })

    }
</script>

<script>
    function addtowhishlist(id, proname, probrand, proimg, proprice, user) {
        $.ajax({
            url: '/addToWhishlist?id=' + id + '&proname=' + proname + '&probrand=' + probrand + '&proimg=' + proimg + '&proprice=' + proprice,
            method: 'get',
            success: (function (response) {
                if (user) {
                    Swal.fire({
                        title: 'Added to Whishlist!',
                        text: 'Product has been added to whishlist succesfully.',
                        icon: 'success',
                        timer: 5000
                    })
                }
                else {
                    Swal.fire({
                        title: 'Please login',
                        text: 'Signup or login',
                        icon: 'info',
                        timer: 5000
                    }).then(function () {
                        window.location.href = "http://localhost:3000/userLogin"
                    })
                }

            })
        })

    }
</script>